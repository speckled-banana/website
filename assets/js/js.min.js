const page=window.location,formTitle="<h2>Contact Speckled Banana</h2>",formIntroHTML='<p>You can send us a message using the contact form below or alternatively reach us directly on:</p>\n          <p>\n            +44 (0)208 0584946 or\n            <a href="mailto:hello@speckledbanana.com">hello@speckledbanana.com</a>.\n          </p>\n\n          <hr />',formHTML=`<form onsubmit="sendMsg()"\n    class="contact column"\n    id="contact-form"\n  >\n    <label for="contact-email">Your email</label>\n    <input\n      type="email"\n      name="email"\n      id="contact-email"\n      required\n    />\n    <label class="form-error" id="contact-email-error" for="contact-email">❗ Please enter a valid email address</label>\n    <label for="contact-message">Message</label>\n    <textarea\n      name="message"\n      id="contact-message"\n      required\n    ></textarea>\n    <label class="form-error" id="contact-message-error" for="contact-message">❗ Please enter a message</label>\n    <label\n      for="info"\n      class="contact-info"\n    >\n      Info\n    </label>\n    <input\n      type="text"\n      name="info"\n      id="contact-info"\n      class="contact-info"\n    />\n    <input\n      type="text"\n      name="source"\n      id="contact-source"\n      class="contact-info"\n      value="${page}"\n    />\n    <div class="row consent">\n      <input\n        type="checkbox"\n        name="gdpr"\n        id="gdpr"\n      />\n      <label for="gdpr">\n        I'm happy for my data to be used to respond to my query.<p>We won't store or use your email address for any other purpose.  More details can be found in our <a href="./privacy-policy.html">privacy policy</a>.</p>\n      </label>\n    </div>\n\n    <button\n      type="submit"\n      id="contact-submit-button"\n      disabled\n    >\n      Send Message\n    </button>\n  </form>\n     <div\n          class="contact-status-message"\n          id="contact-status-message"\n        ></div>`,placeholder=document.getElementById("contact-placeholder");placeholder&&(placeholder.innerHTML=formTitle+(page.toString().indexOf("contact-us")>0?formIntroHTML:"")+formHTML);const form=document.getElementById("contact-form"),gdpr=document.getElementById("gdpr"),submitBtn=document.getElementById("contact-submit-button"),statusMsg=document.getElementById("contact-status-message");let errCount=0;form&&form.addEventListener("submit",e=>{e.preventDefault()}),gdpr&&(gdpr.checked?submitBtn.disabled=!1:submitBtn.disabled=!0,form.addEventListener("change",e=>{gdpr.checked?submitBtn.disabled=!1:submitBtn.disabled=!0}));const sendMsg=async()=>{form.disabled=!0,form.classList.toggle("loading",!0);const e=new FormData(form);await fetch("https://contact.speckledbanana.com/contact",{method:"POST",body:e}).then(e=>{if(200!=e.status)throw new Error("Message send failure");return e}).then(e=>{form.classList.toggle("loading",!1),form.disabled=!1,statusMsg.innerHTML="<p>✅ Message sent.</p><p>We'll be in touch as soon as possible.</p>",placeholder.classList.toggle("success",!0),scrollMsg(),setTimeout(()=>resetForm(),5e3)}).catch(e=>{processErr()})},processErr=()=>{form.classList.toggle("loading",!1),form.disabled=!1,placeholder.classList.toggle("failure",!0),0==errCount?(statusMsg.innerHTML="<p>❌ Sorry, that message didn't send.</p><p>Hopefully it was just a momentary blip, please retry.</p>",setTimeout(()=>resetForm("failure"),3e3)):statusMsg.innerHTML=`<p>❌ Sorry, something is still broken.</p>\n          <p>\n            <a href="mailto:hello@speckledbanana.com?subject=Contact%20Form%20Error!&body=${encodeURIComponent("Contact form error on: "+page+"\n\n============================================\n\n"+document.getElementById("contact-message").value)}" target="_blank" rel="noopener noreferrer">Click here to open the message in your default email application</a></p>\n          <p>Alternatively give us a call on +44 (0)208 0584946</p>`,scrollMsg()},resetForm=e=>{e?(errCount++,placeholder.classList.toggle("failure",!1)):(placeholder.classList.toggle("success",!1),document.getElementById("contact-email").value=null,document.getElementById("contact-message").value=null,document.getElementById("contact-info").value=null,gdpr.checked=!1),statusMsg.innerHTML=null},scrollMsg=()=>window.scrollTo({behaviour:"smooth",top:findPosition(placeholder)}),findPosition=e=>{const t=document.querySelector("header").getBoundingClientRect().bottom+20;let n=0;if(e.offsetParent){do{n+=e.offsetTop-t}while(e=e.offsetParent);return[n]}},copyright=document.getElementById("copyright"),year=(new Date).getFullYear();copyright.innerText=`Copyright ©${year} Speckled Banana Ltd. All Rights Reserved`;